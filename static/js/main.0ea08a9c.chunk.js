(this.webpackJsonpblogging=this.webpackJsonpblogging||[]).push([[0],{20:function(e,t,n){},22:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var c=n(4),o=n.n(c),i=n(16),a=n.n(i),r=(n(34),n(35),n(2)),s=function(){return Object(r.jsxs)("div",{className:"logo",children:[Object(r.jsx)("h3",{children:"PUBLIC"}),Object(r.jsx)("p",{children:"Blogging"})]})},l=n(12),d=n.n(l),u=n(14),j=(n(20),n(26)),b=j.a.initializeApp({apiKey:"AIzaSyBT5FM96vDG4JHtfjmA5GcoA5FEhJyCWyQ",authDomain:"publicblogging-e3071.firebaseapp.com",projectId:"publicblogging-e3071",storageBucket:"publicblogging-e3071.appspot.com",messagingSenderId:"560278651669",appId:"1:560278651669:web:a985f28057c7f1321d9f1c"}),m=b.firestore(),p=b.auth(),h=b.storage(),O=new j.a.auth.GoogleAuthProvider,f=function(){var e=Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.signInWithPopup(O).then((function(e){t=e.user})).catch((function(e){console.log(e.message)}));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=n(10),x=function(){var e=Object(g.b)(),t=function(){var t=Object(u.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f();case 2:(n=t.sent)&&(console.log(n),e((c=n.displayName,o=n.photoURL,i=n.email,a=n.emailVerified,{type:"ADD",Payload:{name:c,pic:o,email:i,verified:a}})));case 4:case"end":return t.stop()}var c,o,i,a}),t)})));return function(){return t.apply(this,arguments)}}();return Object(r.jsx)("div",{className:"signInButton",onClick:t,children:Object(r.jsx)("p",{children:"SignIn with Google"})})},v=(n(22),function(){var e=Object(g.c)((function(e){return e.userReducer.user[0]}));return Object(r.jsxs)("div",{className:"navbar",children:[Object(r.jsx)(s,{}),e?Object(r.jsxs)("div",{className:"proImg",onClick:function(){var e=document.getElementById("dropDown");"block"===e.style.display?e.style.display="none":e.style.display="block"},children:[Object(r.jsx)("img",{alt:"img",id:"nav-pic",src:e.pic}),Object(r.jsx)("div",{className:"dropDown",id:"dropDown",onClick:function(){return window.location.reload(!1)},children:Object(r.jsx)("p",{children:"Log Out"})})]}):Object(r.jsx)(x,{})]})}),y=n(11);var C=function(){var e=Object(g.c)((function(e){return e.userReducer.user[0]})),t=Object(c.useState)(""),n=Object(y.a)(t,2),o=n[0],i=n[1],a=Object(c.useState)(null),s=Object(y.a)(a,2),l=s[0],d=s[1],u=Object(c.useState)(0),j=Object(y.a)(u,2),b=(j[0],j[1]);return e?Object(r.jsx)("div",{className:"createPost",children:Object(r.jsxs)("div",{className:"createPostUpload",children:[Object(r.jsx)("p",{children:"Create a post"}),Object(r.jsx)("textarea",{placeholder:"Add a Caption...",id:"createPostText",value:o,onChange:function(e){i(e.target.value)}}),Object(r.jsx)("div",{className:"img",children:Object(r.jsx)("img",{alt:"error",id:"uploadedImg"})}),Object(r.jsxs)("div",{id:"btns",children:[Object(r.jsx)("label",{htmlFor:"photoUpload",id:"photoLabel",children:"Add Photo"}),Object(r.jsx)("input",{type:"file",id:"photoUpload",onChange:function(e){d(e.target.files[0]);var t=URL.createObjectURL(e.target.files[0]),n=document.getElementById("uploadedImg");n.src=t,n.style.display="block"}}),Object(r.jsx)("button",{type:"button",onClick:function(){if(l){var t=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz1234567890",t="",n=0;n<7;n++){var c=Math.floor(Math.random()*e.length);t+=e.substring(c,c+1)}return t}();h.ref("Images/".concat(t,".jpg")).put(l).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);b(t)}),(function(e){console.log(e)}),(function(){h.ref("Images").child("".concat(t,".jpg")).getDownloadURL().then((function(t){m.collection("Posts").add({Name:e.name,ProfileUrl:e.pic,Email:e.email,PhotoUrl:t,Caption:o})}))}))}i(""),document.getElementById("uploadedImg").style.display="none"},id:"upload",children:"UPLOAD"})]})]})}):Object(r.jsxs)("div",{className:"createPostLogin",children:[Object(r.jsx)(x,{}),Object(r.jsx)("p",{children:"LogIn to create post"})]})},N=function(e){var t=Object(c.useState)([]),n=Object(y.a)(t,2),o=n[0],i=n[1];return Object(c.useEffect)((function(){m.collection("Posts").doc(e.id).collection("Comments").onSnapshot((function(e){e.forEach((function(t){console.log(t.id," => ",t.data()),i(e.docs.map((function(e){return{Name:e.data().Name,Comment:e.data().Comment,ProfileUrl:e.data().ProfileUrl}})))}))}))}),[]),Object(r.jsx)("div",{className:"comments",children:o.map((function(e){return Object(r.jsx)("div",{className:"eachComment",children:Object(r.jsxs)("div",{id:"comment",children:[Object(r.jsx)("div",{id:"commentOwner",children:Object(r.jsx)("img",{src:e.ProfileUrl})}),Object(r.jsxs)("div",{className:"commentBody",children:[Object(r.jsx)("p",{children:e.Name}),Object(r.jsx)("p",{id:"commentText",children:e.Comment})]})]})})}))})},P=function(e){var t=Object(c.useState)(""),n=Object(y.a)(t,2),o=n[0],i=n[1],a=Object(g.c)((function(e){return e.userReducer.user[0]}));return Object(r.jsxs)("div",{className:"createComment",children:[Object(r.jsx)("textarea",{placeholder:"Comment here...",id:"createCommentText",value:o,onChange:function(e){i(e.target.value)}}),Object(r.jsx)("div",{id:"btns",children:Object(r.jsx)("button",{type:"button",onClick:function(){""!==o&&(m.collection("Posts").doc(e.id).collection("Comments").add({Name:a.name,ProfileUrl:a.pic,Comment:o}),i(""))},id:"upload",children:"Comment"})})]})},U=function(){Object(c.useEffect)((function(){m.collection("Posts").onSnapshot((function(e){o(e.docs.map((function(e){return{Name:e.data().Name,Caption:e.data().Caption,Email:e.data().Email,PhotoUrl:e.data().PhotoUrl,ProfileUrl:e.data().ProfileUrl,id:e.id}})))}))}),[]);var e=Object(c.useState)([]),t=Object(y.a)(e,2),n=t[0],o=t[1];var i=function(e){m.collection("Posts").doc(e).delete().then((function(){console.log("Document successfully deleted!")})).catch((function(e){console.error("Error removing document: ",e)}))};return Object(r.jsx)("div",{children:n.map((function(e){return Object(r.jsx)("div",{className:"eachPost",children:Object(r.jsxs)("div",{id:"post",children:[Object(r.jsxs)("div",{id:"postHead",children:[Object(r.jsxs)("div",{className:"postHead",children:[Object(r.jsx)("img",{src:e.ProfileUrl}),Object(r.jsx)("p",{children:e.Name})]}),Object(r.jsx)("button",{type:"button",id:"deleteBtn",onClick:i,children:"Delete"})]}),Object(r.jsxs)("div",{className:"postBody",children:[Object(r.jsx)("p",{children:e.Caption}),Object(r.jsx)("img",{src:e.PhotoUrl})]}),Object(r.jsx)(P,{id:e.id}),Object(r.jsx)(N,{id:e.id})]})})}))})},I=function(){return Object(r.jsxs)("div",{className:"home",children:[Object(r.jsx)(v,{}),Object(r.jsx)(C,{}),Object(r.jsx)(U,{})]})};n(47);var w=function(){return Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(I,{})})},E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,49)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),c(e),o(e),i(e),a(e)}))},D=n(18),S=n(29),k=n(27),B={user:[]};var L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD":return Object(k.a)(Object(k.a)({},e),{},{user:[].concat(Object(S.a)(e.user),[t.Payload])});default:return e}},T=Object(D.a)({userReducer:L}),_=Object(D.b)(T,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());a.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(g.a,{store:_,children:Object(r.jsx)(w,{})})}),document.getElementById("root")),E()}},[[48,1,2]]]);
//# sourceMappingURL=main.0ea08a9c.chunk.js.map